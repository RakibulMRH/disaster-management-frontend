<div class="container d-flex justify-content-center align-items-center vh-100">
  <div class="card p-4" style="width: 100%; max-width: 400px;">
    <div class="card-body">
      <h3 class="card-title text-center mb-4">Register</h3>
      <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" name="username" class="form-control" [(ngModel)]="username" required pattern="^[a-zA-Z0-9_]+$" #usernameInput="ngModel">
          <div *ngIf="usernameInput.invalid && (usernameInput.dirty || usernameInput.touched)" class="text-danger">
            <div *ngIf="usernameInput.errors?.['required']">Username is required.</div>
            <div *ngIf="usernameInput.errors?.['pattern']">Username can only contain letters, numbers, and underscores.</div>
          </div>
          <div *ngIf="usernameError" class="text-danger">{{ usernameError }}</div>
        </div>

        <div class="form-group mt-3">
          <label for="name">Name</label>
          <input type="text" id="name" name="name" class="form-control" [(ngModel)]="name" required #nameInput="ngModel">
          <div *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="text-danger">
            <div *ngIf="nameInput.errors?.['required']">Name is required.</div>
          </div>
        </div>

        <div class="form-group mt-3">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" class="form-control" [(ngModel)]="email" required email #emailInput="ngModel">
          <div *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)" class="text-danger">
            <div *ngIf="emailInput.errors?.['required']">Email is required.</div>
            <div *ngIf="emailInput.errors?.['email']">Please enter a valid email address.</div>
          </div>
        </div>

        <div class="form-group mt-3">
          <label for="password">Password</label>
          <input type="password" id="password" name="password" class="form-control" [(ngModel)]="password" required minlength="8" #passwordInput="ngModel">
          <div *ngIf="passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)" class="text-danger">
            <div *ngIf="passwordInput.errors?.['required']">Password is required.</div>
            <div *ngIf="passwordInput.errors?.['minlength']">Password must be at least 8 characters long.</div>
          </div>
        </div>

        <div class="form-group mt-3">
          <label for="phoneNumber">Phone Number</label>
          <input type="tel" id="phoneNumber" name="phoneNumber" class="form-control" [(ngModel)]="phoneNumber" #phoneNumberInput="ngModel">
        </div>

        <div class="form-group mt-3">
          <label for="age">Age</label>
          <input type="number" id="age" name="age" class="form-control" [(ngModel)]="age" min="0" #ageInput="ngModel">
          <div *ngIf="ageInput.invalid && (ageInput.dirty || ageInput.touched)" class="text-danger">
            <div *ngIf="ageInput.errors?.['min']">Age must be a positive number.</div>
          </div>
        </div>

        <button type="submit" class="btn btn-primary mt-3 w-100" [disabled]="!registerForm.form.valid">Register</button>
      </form>

      <div *ngIf="errorMessage" class="alert alert-danger mt-3">
        {{ errorMessage }}
      </div>

      <div class="text-center mt-3">
        Already have an account? <a class="text-primary" [routerLink]="['/login']">Login</a><br>
        <a class="text-primary" [routerLink]="['/home']">Home</a>
      </div>
    </div>
  </div>
</div>
