<div class="container">
  <h2>Report a Crisis</h2>
  <form [formGroup]="crisisForm" (ngSubmit)="submitCrisisForm()">
    <!-- Crisis Form Fields -->
    <div>
      <label for="title">Crisis Title</label>
      <input id="title" type="text" formControlName="title" required />
    </div>
    <div>
      <label for="description">Description</label>
      <textarea id="description" formControlName="description" required></textarea>
    </div>
    <div>
      <label for="location">Location</label>
      <input id="location" type="text" formControlName="location" required />
    </div>
    <div>
      <label for="severity">Severity</label>
      <select id="severity" formControlName="severity">
        <option value="low">Low</option>
        <option value="medium">Medium</option>
        <option value="high">High</option>
        <option value="critical">Critical</option>
      </select>
    </div>
    <div>
      <label for="goal">Estimate a Fund amount</label>
      <input id="goal" type="number" formControlName="goal" required />
    </div>
    <div>
      <label for="image">Upload Image as an evidence</label>
      <input id="image" type="file" (change)="handleImageUpload($event)" />
    </div>
    <button type="submit" [disabled]="crisisForm.invalid">Submit</button>
  </form>

  <!-- Crises List -->
  <h2>Pending Crises</h2>
  <div class="crisis-list" style="display: flex; flex-direction: column; max-height: 700px; overflow-y: auto;">
    <div *ngFor="let crisis of crises" class="crisis-item mb-4 p-3 bg-light rounded-lg">
      <div class="d-flex align-items-center">
        <img [src]="crisis.imageUrl || 'https://via.placeholder.com/100'" [alt]="crisis.title"
          class="me-3 rounded-circle" style="width: 80px; height: 80px; object-fit: cover;">
        <div>
          <h4 class="h5 mb-2">{{ crisis.title || 'No Title' }}</h4>
          <p class="mb-2">{{ crisis.description || 'No Description' }}</p>
          <p class="mb-2"><strong>Location:</strong> {{ crisis.location || 'No Location' }}</p>
          <p class="mb-0">
            <strong>Severity:</strong>
            <span class="badge" [ngClass]="{
              'bg-success': crisis.severity === 'low',
              'bg-warning': crisis.severity === 'medium',
              'bg-danger': crisis.severity === 'high',
              'bg-dark': crisis.severity === 'critical'
            }">
              {{ crisis.severity | titlecase }}
            </span>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
